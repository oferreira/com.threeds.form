!function($){$.fn.header3ds=function(opt){function bindTopbar(){$.service("url").topbar(function(data){var $_modal=$("#"+options.modalId);void 0!==data.signInURL&&null!==data.signInURL&&($(".".concat(pcss,"connect")).click(function(){$_modal.modal("show")}),$("#"+options.modalId+"-iframe").attr("src",data.signInURL)),void 0!==data.myAccountURL&&null!==data.myAccountURL&&$(".".concat(pcss,"trigram")).click(function(){window.location=data.myAccountURL})})}function bindLinkOpenModal(){$("a[data-threeds-modal]").each(function(index,value){console.log($(this).html())})}var defaults={bgcolor:"blue",secure:!1,website:"a",language:"en",hasfooter:!1,haslogin:!1,hascompass:!0,hassocial:!1,hastrigram:!0,hasconnect:!0,hasborder:!0,margin:0,width:"100%",callback:null,modalId:"myModal",atg:{apiURL:"http://localhost:3000"},debug:!1},ErrorEventListenerInterval=1e3,ErrorEventListenerLimit=5,$setting=null,$userCookie=null,options=$.extend({},defaults,opt),pcss=(function(){$setting=Setting3DS.prototype.getInstance({language:options.language,atg:options.atg,debug:options.debug}),$userCookie=UserCookie.prototype.getInstance(),$.i18n().setLang(options.language),WatchJS.watch(options,"language",function(prop,action,newvalue,oldvalue){(void 0!==newvalue||null!==newvalue)&&$.i18n().setLang(newvalue)})}(),"ds_"),bgcolor=["black","dark","grey","light","white","blue"],lang=["en","fr","de","en","it","es","ja","zh","ko","ru","sv","pt"],website=["a","b","c","d","e","f","g","h"],optionsTmp=$.extend({},defaults),soc=[{n:"facebook",u:"https://www.facebook.com/DassaultSystemes"},{n:"linkedin",u:"http://www.linkedin.com/company/3896?trk=tyah"},{n:"swym",u:"https://swym.3ds.com/"},{n:"twitter",u:"https://twitter.com/dassault3DS"},{n:"youtube",u:"http://www.youtube.com/user/DassaultSystemes"},{n:"rss",u:"http://www.3ds.com/rss/"}];(function(){window.addEventListener("message",function(e){"CloseModal"==e.data&&($("#"+options.modalId).modal("hide"),$userCookie.auth(!0),$userCookie.auth(!0)),"ResizeModal"==e.data[0]&&((void 0!==e.data[1]||null!==e.data[1])&&e.data[1]>0&&$("#"+options.modalId).modal("setIframeHeight",[e.data[1]]),(void 0!==e.data[2]||null!==e.data[2])&&e.data[2]>0&&$("#"+options.modalId).modal("setIframeWidth",[e.data[2]]))},!0),$(document).on("UrlServiceErrorEvent",function(event,instance,fn,callback){var nbErrorPropertyName=fn.concat("NbError");void 0===instance[nbErrorPropertyName]?instance[nbErrorPropertyName]=1:instance[nbErrorPropertyName]++,instance[nbErrorPropertyName]<ErrorEventListenerLimit?setTimeout(function(){instance[fn](callback)},ErrorEventListenerInterval*instance[nbErrorPropertyName]):instance[nbErrorPropertyName]==ErrorEventListenerLimit&&$userCookie.logout()}),$(document).on("3DSUserHasConnectedEvent",function(event,userCookie){console.log("> 3DSUserHasConnectedEvent"),$(".".concat(pcss,"btn")).show(),$(".".concat(pcss,"trigram")).show(),userCookie._validCookie()?($(".".concat(pcss,"trigram")).removeClass(pcss+"no-trigram"),$(".".concat(pcss,"trigram_content")).html(userCookie.trigram())):$(".".concat(pcss,"trigram")).addClass(pcss+"no-trigram"),$(".".concat(pcss,"connect")).hide(),$(".".concat(pcss,"compass")).show(),bindTopbar()}),$(document).on("3DSUserHasDisconnectedEvent",function(event,userCookie){console.log("> 3DSUserHasDisconnectedEvent"),$(".".concat(pcss,"connect")).show(),$(".".concat(pcss,"trigram")).hide(),bindTopbar(),$(".".concat(pcss,"trigram")).unbind("click")}),$(document).on("3DSApiErrorEvent",function(event,userCookie){console.log("> 3DSApiErrorEvent"),$(".".concat(pcss,"connect")).hide(),$(".".concat(pcss,"trigram")).hide()})})();bindLinkOpenModal();var isok=function(value,arr){return-1!=arr.indexOf(value)},isbool=function(val,defaultVal){if(defaultVal)if("false"==val||0==val||"0"==val||0==val)var retVal=!1;else var retVal=!0;else if("true"==val||1==val||"1"==val||1==val)var retVal=!0;else var retVal=!1;return retVal};isok(options.bgcolor,bgcolor)&&(optionsTmp.bgcolor=options.bgcolor),isok(options.website,website)&&(optionsTmp.website=options.website),isok(options.language,lang)&&(optionsTmp.language=options.language),optionsTmp.secure=isbool(options.secure,defaults.secure),optionsTmp.hasfooter=isbool(options.hasfooter,defaults.hasfooter),optionsTmp.haslogin=isbool(options.haslogin,defaults.haslogin),optionsTmp.hasborder=isbool(options.hasborder,defaults.hasborder),optionsTmp.hascompass=isbool(options.hascompass,defaults.hascompass),optionsTmp.hassocial=isbool(options.hassocial,defaults.hassocial),optionsTmp.hastrigram=isbool(options.hastrigram,defaults.hastrigram),optionsTmp.hasconnect=isbool(options.hasconnect,defaults.hasconnect),optionsTmp.haslogin=!1;var m=options.margin;"undefined"!=typeof m&&null!==m&&(optionsTmp.margin=parseInt(m));var w=options.width,w_unit="%";if("undefined"!=typeof w&&null!==w){w_unit=(w.match(/(%|px)$/)||["%"])[0];var nmbr=parseInt(w);"%"==w_unit&&nmbr>100&&(nmbr=100),optionsTmp.width=nmbr+2*options.margin+w_unit}options.mediaqueries&&(optionsTmp.mediaqueries=options.mediaqueries);var params=$.extend(defaults,optionsTmp),baseurlLang="";switch(params.language){case"pt":baseurlLang="pt-br/"}""==baseurlLang&&"en"!=params.language&&(baseurlLang=params.language+"/");var baseurl=params.secure?"https://www.3ds.com/"+baseurlLang:"http://www.3ds.com/"+baseurlLang,baseurl_nolang=params.secure?"https://www.3ds.com/":"http://www.3ds.com/",compassURL=baseurl+"about-3ds/3dexperience-platform/",createQAList=function(){var links=[];if("fr"==params.language)switch(compassURL=baseurl+"a-propos-de-3ds/la-plate-forme-3dexperience/",params.website){case"a":break;case"b":links.push({n:"Industries",u:baseurl+"industries/"});break;case"c":links.push({n:"Industries",u:baseurl+"industries/"}),links.push({n:"Produits et Services",u:baseurl+"produits-et-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"3dexperience/"});break;case"e":links.push({n:"Partenaires",u:baseurl+"partners/"});break;case"f":links.push({n:"CGR",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"Evénements",u:baseurl+"evenements/"});break;case"h":links.push({n:"Produits et Services",u:baseurl+"produits-et-services/"})}else if("de"==params.language)switch(compassURL=baseurl+"ueber-dassault-systemes/3dexperience-plattform/",params.website){case"a":break;case"b":links.push({n:"Branchen",u:baseurl+"branchen/"});break;case"c":links.push({n:"Branchen",u:baseurl+"branchen/"}),links.push({n:"Produkte und Services",u:baseurl+"produkte-und-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl_nolang+"3dexperience/"});break;case"e":links.push({n:"Partner",u:baseurl+"partner/"});break;case"f":links.push({n:"Gebrauchsgüter und Handel",u:baseurl+"branchen/gebrauchsgueter-und-handel/"});break;case"g":links.push({n:"Veranstaltungen",u:baseurl+"veranstaltungen/"});break;case"h":links.push({n:"Produkte und Services",u:baseurl+"produkte-und-services/"})}else if("it"==params.language)switch(compassURL=baseurl+"informazioni-su-3ds/piattaforma-3dexperience/",params.website){case"a":break;case"b":links.push({n:"Settori Industriali",u:baseurl+"settori-industriali/"});break;case"c":links.push({n:"settori-industriali",u:baseurl+"settori-industriali/"}),links.push({n:"Prodotti e Servizi",u:baseurl+"prodotti-e-servizi/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"Partner",u:baseurl+"partner/"});break;case"f":links.push({n:"Prodotti di largo consumo e vendita al dettaglio",u:baseurl+"settori-industriali/prodotti-di-largo-consumo-e-vendita-al-dettaglio/"});break;case"g":links.push({n:"Eventi",u:baseurl+"eventi/"});break;case"h":links.push({n:"Prodotti e Servizi",u:baseurl+"prodotti-e-servizi/"})}else if("es"==params.language)switch(compassURL=baseurl+"acerca-de-3ds/plataforma-3dexperience/",params.website){case"a":break;case"b":links.push({n:"Industrias",u:baseurl+"industrias/"});break;case"c":links.push({n:"Industrias",u:baseurl+"industrias/"}),links.push({n:"Productos y Servicios",u:baseurl+"productos-y-servicios/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"Partners",u:baseurl+"partners/"});break;case"f":links.push({n:"Bienes de consumo y Venta al por menor",u:baseurl+"industrias/bienes-de-consumo-y-venta-al-por-menor/"});break;case"g":links.push({n:"Eventos",u:baseurl+"eventos/"});break;case"h":links.push({n:"Productos y Servicios",u:baseurl+"productos-y-servicios/"})}else if("ja"==params.language)switch(compassURL=baseurl+"about-3ds/3dexperience-platform/",params.website){case"a":break;case"b":links.push({n:"インダストリー",u:baseurl+"industries/"});break;case"c":links.push({n:"インダストリー",u:baseurl+"industries/"}),links.push({n:"製品 / サービス",u:baseurl+"products-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"パートナー",u:baseurl+"partners/"});break;case"f":links.push({n:"消費財・小売業",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"イベント/セミナー",u:baseurl+"events/"});break;case"h":links.push({n:"製品 / サービス",u:baseurl+"products-services/"})}else if("zh"==params.language)switch(compassURL=baseurl+"about-3ds/3dexperience-platform/",params.website){case"a":break;case"b":links.push({n:"行业",u:baseurl+"industries/"});break;case"c":links.push({n:"行业",u:baseurl+"industries/"}),links.push({n:"产品和服务",u:baseurl+"products-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"パートナー",u:baseurl+"partners/"});break;case"f":links.push({n:"消費財・小売業",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"活动",u:baseurl+"events/"});break;case"h":links.push({n:"产品和服务",u:baseurl+"products-services/"})}else if("ko"==params.language)switch(compassURL=baseurl+"about-3ds/3dexperience-platform/",params.website){case"a":break;case"b":links.push({n:"산업",u:baseurl+"industries/"});break;case"c":links.push({n:"산업",u:baseurl+"industries/"}),links.push({n:"제품과 서비스",u:baseurl+"products-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"파트너",u:baseurl+"partners/"});break;case"f":links.push({n:"소비재 산업",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"이벤트",u:baseurl+"events/"});break;case"h":links.push({n:"제품과 서비스",u:baseurl+"products-services/"})}else if("ru"==params.language)switch(compassURL=baseurl+"o-3ds/platforma-3dexperience/",params.website){case"a":break;case"b":links.push({n:"Отрасли",u:baseurl+"otrasli/"});break;case"c":links.push({n:"Отрасли",u:baseurl+"otrasli/"}),links.push({n:"Продукты и услуги",u:baseurl+"produkty-i-uslugi/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"Партнеры",u:baseurl+"partnery/"});break;case"f":links.push({n:"Товары широкого потребления и розница",u:baseurl+"otrasli/tovary-shirokogo-potreblenija-i-roznica/"});break;case"g":links.push({n:"События",u:baseurl+"sobytija/"});break;case"h":links.push({n:"Продукты и услуги",u:baseurl+"produkty-i-uslugi/"})}else if("sv"==params.language)switch(compassURL=baseurl+"om-3ds/Plattformen-3DEXPERIENCE/",params.website){case"a":break;case"b":links.push({n:"Branscher",u:baseurl+"branscher/"});break;case"c":links.push({n:"Branscher",u:baseurl+"branscher/"}),links.push({n:"Produkter och tjänster",u:baseurl+"produkter-och-tjaenster/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"Partner",u:baseurl+"partners/"});break;case"f":links.push({n:"Konsumentprodukter och detaljhandel",u:baseurl+"branscher/konsumentprodukter-och-detaljhandel/"});break;case"g":links.push({n:"Events",u:baseurl+"events/"});break;case"h":links.push({n:"Produkter och tjänster",u:baseurl+"produkter-och-tjaenster/"})}else if("pt"==params.language)switch(compassURL=baseurl+"about-3ds/3dexperience-platform/",params.website){case"a":break;case"b":links.push({n:"Industrias",u:baseurl+"industrias/"});break;case"c":links.push({n:"Industrias",u:baseurl+"Industrias/"}),links.push({n:"Produtos e Servicos",u:baseurl+"produtos-e-servicos/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"passion-for-innovation/"});break;case"e":links.push({n:"Parceiros",u:baseurl+"parceiros/"});break;case"f":links.push({n:"Consumer Goods & Retail",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"Eventos",u:baseurl+"eventos/"});break;case"h":links.push({n:"Produtos e Servicos",u:baseurl+"produtos-e-servicos/"})}else switch(compassURL=baseurl+"about-3ds/3dexperience-platform/",params.website){case"a":break;case"b":links.push({n:"Industries",u:baseurl+"industries/"});break;case"c":links.push({n:"Industries",u:baseurl+"industries/"}),links.push({n:"Products & Services",u:baseurl+"products-services/"});break;case"d":links.push({n:"Passion For Innovation",u:baseurl+"3dexperience/"});break;case"e":links.push({n:"Partners",u:baseurl+"partners/"});break;case"f":links.push({n:"Consumer Goods & Retail",u:baseurl+"industries/consumer-goods-retail/"});break;case"g":links.push({n:"Events",u:baseurl+"events/"});break;case"h":links.push({n:"Products & Services",u:baseurl+"products-services/"})}return links},links=createQAList(),createItemLink=function(name,url,tag){return $("<"+tag+">").append($("<a>").attr("href",url).attr("title",name).append($("<span>").html(name)))},displaySocial=function(){var $list=$("<p>");for(v in soc)createItemLink(soc[v].n,soc[v].u,"span").addClass(soc[v].n).appendTo($list);return $list.find("a span").addClass(pcss+"hide"),$list},displayQuickAccess=function(){var $list=$("<p>");for(v in links)createItemLink(links[v].n,links[v].u,"span").appendTo($list);return $list},displayID=function(){return $("<span>")},customMediaQueries=function(){if(params.mediaqueries){for(var mq_style="",i=0;i<params.mediaqueries.length;i++){mq_style+="@media screen %min_rule% %max_rule% { %rules% }";var min_rule="and ( min-width: %min% )",max_rule="and ( max-width: %max% )",mq_i=params.mediaqueries[i];mq_i.min&&null!=mq_i.min&&""!=mq_i.min?(min_rule=min_rule.replace("%min%",mq_i.min),mq_style=mq_style.replace("%min_rule%",min_rule)):mq_style=mq_style.replace("%min_rule%",""),mq_i.max&&null!=mq_i.max&&""!=mq_i.max?(max_rule=max_rule.replace("%max%",mq_i.max),mq_style=mq_style.replace("%max_rule%",max_rule)):mq_style=mq_style.replace("%max_rule%","");var rules="";mq_i.width&&null!=mq_i.width&&""!=mq_i.width&&(rules+=".ds_center { width: "+mq_i.width+" !important; }"),mq_i.margin&&null!=mq_i.margin&&""!=mq_i.margin&&(rules+=".ds_inner { padding: 0 "+mq_i.margin+" !important; }"),mq_style=mq_style.replace("%rules%",rules)}$("body").append($("<style>").html(mq_style))}},displayFooterLinks=function(){var date=new Date,copy_begin="© 2002-"+date.getFullYear()+" Dassault Systèmes - ",$list=$("<p>"),$links=[],$copy=$("<span>");"fr"==params.language?($links.push({n:"Informations légales",u:baseurl+"mentions-legales/"}),$links.push({n:"Conditions d'utilisation",u:baseurl+"conditions-dutilisation/"}),$links.push({n:"Politique de confidentialité",u:baseurl+"politique-de-protection-des-donnees-personnelles/"}),$links.push({n:"Piratage",u:baseurl+"piratage/"}),$copy.html(copy_begin+"Tous droits réservés")):"de"==params.language?($links.push({n:"Rechtliche Hinweise",u:baseurl+"rechtliche-hinweise/"}),$links.push({n:"Nutzungsbedinungen",u:baseurl+"nutzungsbedingungen/"}),$links.push({n:"Datenschutzrichtlinie",u:baseurl+"datenschutzrichtlinie/"}),$links.push({n:"Piraterie",u:baseurl+"piraterie/"}),$copy.html(copy_begin+"Sämtliche Rechte vorbehalten")):"it"==params.language?($links.push({n:"Informazioni legali",u:baseurl+"informazioni-legali/"}),$links.push({n:"Condizioni d'uso",u:baseurl+"condizioni-duso/"}),$links.push({n:"Principi di tutela della privacy",u:baseurl+"principi-di-tutela-della-privacy/"}),$links.push({n:"Pirateria",u:baseurl+"pirateria/"}),$copy.html(copy_begin+"Tutti i diritti riservati")):"ru"==params.language?($links.push({n:"Юридическая информация",u:baseurl+"juridicheskaja-informacija/"}),$links.push({n:"Условия использования",u:baseurl+"pravila-ispolzovanija/"}),$links.push({n:"Политика конфиденциальности",u:baseurl+"pravila-obrabotki-chastnoi-informacii/"}),$links.push({n:"Пиратство",u:baseurl+"borba-s-piratstvom/"}),$copy.html(copy_begin+"Все права защищены")):"es"==params.language?($links.push({n:"Información legal",u:baseurl+"informacion-legal/"}),$links.push({n:"Condiciones de uso",u:baseurl+"terminos-y-condiciones-de-uso/"}),$links.push({n:"Política de privacidad",u:baseurl+"politica-de-privacidad/"}),$links.push({n:"Piratería",u:baseurl+"pirateria/"}),$copy.html(copy_begin+"Todos los derechos reservados")):"ko"==params.language?($links.push({n:"법률 정보",u:baseurl+"legal-information/"}),$links.push({n:"사용권 계약",u:baseurl+"terms-of-use/"}),$links.push({n:"개인정보 보호정책",u:baseurl+"privacy-policy/"}),$links.push({n:"저작권 침해",u:baseurl+"piracy/"}),$copy.html(copy_begin+"Copyright")):"zh"==params.language?($links.push({n:"法律信息",u:baseurl+"legal-information/"}),$links.push({n:"使用条款",u:baseurl+"terms-of-use/"}),$links.push({n:"隐私政策",u:baseurl+"privacy-policy/"}),$links.push({n:"隐私",u:baseurl+"piracy/"}),$copy.html(copy_begin+"保留所有权利")):"ja"==params.language?($links.push({n:"法的事項",u:baseurl+"legal-information/"}),$links.push({n:"利用規約",u:baseurl+"terms-of-use/"}),$links.push({n:"個人情報管理方針",u:baseurl+"privacy-policy/"}),$links.push({n:"著作権侵害",u:baseurl+"piracy/"}),$copy.html(copy_begin+"無断複写・複製・転載を禁ず")):"se"==params.language?($links.push({n:"Juridisk information",u:baseurl+"laglig-information/"}),$links.push({n:"Användarvillkor",u:baseurl+"anvaendningsvillkor/"}),$links.push({n:"Sekretesspolicy",u:baseurl+"politik-gaellande-personuppgifter/"}),$links.push({n:"Piratkopiering",u:baseurl+"piratkopiering/"}),$copy.html(copy_begin+"Med ensamrätt")):($links.push({n:"Legal Info",u:baseurl+"legal-information/"}),$links.push({n:"Terms of use",u:baseurl+"terms-of-use/"}),$links.push({n:"Privacy policy",u:baseurl+"privacy-policy/"}),$links.push({n:"Piracy",u:baseurl+"piracy/"}),$copy.html(copy_begin+"All rights reserved"));for(v in $links){var $pipe=$("<span>").addClass(pcss+"pipe"),last=$links.length-1;v==last?createItemLink($links[v].n,$links[v].u,"span").appendTo($list):createItemLink($links[v].n,$links[v].u,"span").append($pipe).appendTo($list.append(" "))}return $list.append($("<span>").addClass(pcss+"copy").append($copy)),$list};return this.each(function(){var $this=$(this);$this.css("padding-top","56px").css("position","inherit");var $logo=$("<h3>").addClass(pcss+"logo").append($("<a>").attr("href",baseurl).append($("<span>").addClass(pcss+"hide").html("Dassault Systèmes"))),$btnSocial=$("<span>").addClass(pcss+"btn").append($("<span>").addClass(pcss+"hide").html("Tools")).on("click",function(){$sliderSocial.stop().animate({width:"toggle"},{duration:500,easing:"swing"}),$(".h3ds_social").stop().animate({width:"toggle"},{duration:500,easing:"swing"})}),$sliderSocial=$("<div>").addClass(pcss+"slider").hide().append(displaySocial());$btnSocial.append($sliderSocial);var $trigram=$("<span>").addClass(pcss+"trigram");$trigram.append($("<span>").addClass(pcss+"trigram_content").append($("<div>").addClass(pcss+"txt")));var $connect=$("<span>").addClass(pcss+"connect");$connect.append($("<a>").addClass(pcss+"banner-btn").append("Connect"));var $modal=$("<div>").addClass("modal").addClass("fade").attr("id",options.modalId).attr("tabindex","-1").attr("role","dialog").attr("aria-hidden","true").append($("<div>").addClass("modal-dialog").append($("<div>").addClass("modal-content").append($("<div>").addClass("modal-body").append($("<button>").addClass("close").attr("type","button").attr("data-dismiss","modal").attr("aria-label","Close").append($("<span>").attr("aria-hidden","true"))).append($("<iframe>").attr("id",options.modalId+"-iframe").attr("src","").attr("width","100%").attr("height","100%").attr("frameborder","0").attr("allowtransparency","true"))))),$layerID=$("<div>").addClass(pcss+"id").append(displayID()),$compassA=$("<a>").attr("href",compassURL),$compass=$("<div>").addClass(pcss+"compass").append($compassA),$quickAccess=$("<div>").addClass(pcss+"links").append(displayQuickAccess()),$rightSide=$("<div>").addClass(pcss+"right"),$header=$("<div>").addClass("ds").addClass(pcss+params.bgcolor),$headerWinner=$("<div>").addClass(pcss+"inner").css("padding","0 "+params.margin+"px"),$headerW=$("<div>").addClass(pcss+"center").width(params.width);params.hasborder||$header.addClass(pcss+"noborder");var $footer=$("<div>").addClass("ds").addClass(pcss+"footer").addClass(pcss+params.bgcolor),$footerW=$("<div>").addClass(pcss+"center").width(params.width),$footerLinks=$("<div>").addClass(pcss+"flinks").append(displayFooterLinks());customMediaQueries();var iconClass="";switch(params.bgcolor){case"black":iconClass="txtlight";break;case"dark":iconClass="txtlight";break;case"grey":iconClass="txtlight";break;case"light":iconClass="txtdark";break;case"white":iconClass="txtblue";break;case"blue":iconClass="txtlight";break;default:iconClass="txtblue"}$header.addClass(pcss+iconClass),$footer.addClass(pcss+iconClass),$header.append($headerW.append($headerWinner.append($logo).append($rightSide.append($quickAccess)))),params.haslogin&&$layerID.prependTo($rightSide),params.hassocial&&$btnSocial.prependTo($rightSide),params.hastrigram&&$trigram.prependTo($rightSide),params.hasconnect&&$connect.prependTo($rightSide),params.hascompass&&$compass.prependTo($rightSide),params.display_social_btn&&$compass.prependTo($rightSide),$footer.append($footerLinks),$footer.append($footerW.append($footerLinks)),$header.prependTo($this),$modal.prependTo($this),params.hasfooter&&$footer.appendTo($this),params.callback&&params.callback()})}}(jQuery);var I18n=function(options){this.options=$.extend({},this.DEFAULTS,options)};I18n.prototype.VERSION="0.0.1",I18n.prototype.DEFAULTS={lang:"en"},I18n.prototype.byString=function(o,s){s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,"");for(var a=s.split("."),i=0,n=a.length;n>i;++i){var k=a[i];if(!(k in o))return;o=o[k]}return o},I18n.prototype.instance=void 0,I18n.prototype.getInstance=function(options){return(void 0===I18n.prototype.instance||null===I18n.prototype.instance)&&(I18n.prototype.instance=new I18n(options)),I18n.prototype.instance},I18n.prototype.t=function(name){return I18n.prototype.byString($_i18nData,this.options.lang.concat(".",name))},I18n.prototype.setLang=function(value){return this.options.lang=value,this},jQuery.extend({i18n:function(options){return new I18n.prototype.getInstance(options)},t:function(name){return(new I18n.prototype.getInstance).t(name)}}),+function($){"use strict";function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.VERSION="0.0.1",Modal.TRANSITION_DURATION=300,Modal.BACKDROP_TRANSITION_DURATION=150,Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){$(e.target).is(that.$element)&&(that.ignoreBackdropClick=!0)})}),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.adjustDialog(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in"),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},Modal.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},Modal.prototype.iframeLastHeight=0,Modal.prototype.setIframeHeight=function(value){this.iframeLastHeight!=value&&this.$element.find("iframe").css("height",(Modal.prototype.iframeLastHeight=value)+"px")},Modal.prototype.iframeLastWidth=0,Modal.prototype.setIframeWidth=function(value){this.iframeLastWidth!=value&&this.$element.find("iframe").css("width",(Modal.prototype.iframeLastWidth=value)+"px")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.$body.removeClass("modal-open"),that.resetAdjustments(),that.resetScrollbar(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},Modal.prototype.handleUpdate=function(){this.adjustDialog()},Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})},Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth,this.scrollbarWidth=this.measureScrollbar()},Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.bs.modal",function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})}),Plugin.call($target,option,this)})}(jQuery),+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one("bsTransitionEnd",function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){return $(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var ServiceManager=function(){};String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},ServiceManager.prototype.VERSION="0.0.1",ServiceManager.prototype.DEFAULTS={},ServiceManager.prototype.instance=void 0,ServiceManager.prototype.getInstance=function(){return(void 0===ServiceManager.prototype.instance||null===ServiceManager.prototype.instance)&&(ServiceManager.prototype.instance=new ServiceManager),ServiceManager.prototype.instance},ServiceManager.prototype.get=function(name,options){return eval(name.capitalize()+"Service.prototype.getInstance").apply(options)},jQuery.extend({service:function(name,options){return name?(new ServiceManager.prototype.getInstance).get(name,options):new ServiceManager.prototype.getInstance}});var Setting3DS=function(options){this.options=$.extend({},this.DEFAULTS,options)};Setting3DS.prototype.VERSION="0.0.1",
Setting3DS.prototype.DEFAULTS={},Setting3DS.prototype.options={},Setting3DS.prototype.instance=null,Setting3DS.prototype.getInstance=function(options){return(void 0===Setting3DS.prototype.instance||null===Setting3DS.prototype.instance)&&(Setting3DS.prototype.instance=new Setting3DS(options)),Setting3DS.prototype.instance},Setting3DS.prototype.byString=function(o,s){s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,"");for(var a=s.split("."),i=0,n=a.length;n>i;++i){var k=a[i];if(!(k in o))return;o=o[k]}return o},Setting3DS.prototype.set=function(key,value){return this.options[key]=value,this},Setting3DS.prototype.get=function(key){return Setting3DS.prototype.byString(this.options,key)};var UserCookie=function(options){this.options=$.extend({},this.DEFAULTS,options),WatchJS.watch(this,"data",function(prop,action,newvalue,oldvalue){void 0!==newvalue||null!==newvalue?(this._createCookie(newvalue),this.options.user_connected_callback()):this.options.user_disconnected_callback()}),this.auth()};UserCookie.prototype.AUTH_COOKIE_NAME="3ds-auth",UserCookie.prototype.VERSION="0.0.1",UserCookie.prototype.DEFAULTS={domain:"",lifetime:86400,path:"/",user_connected_callback:function(){$(document).trigger("3DSUserHasConnectedEvent",[UserCookie.prototype.instance])},user_disconnected_callback:function(){$(document).trigger("3DSUserHasDisconnectedEvent",[UserCookie.prototype.instance])},api_error_callback:function(){$(document).trigger("3DSApiErrorEvent",[UserCookie.prototype.instance])}},UserCookie.prototype.options={},UserCookie.prototype.data=null,UserCookie.prototype.instance=null,UserCookie.prototype.getInstance=function(options){return(void 0===UserCookie.prototype.instance||null===UserCookie.prototype.instance)&&(UserCookie.prototype.instance=new UserCookie(options)),UserCookie.prototype.instance},UserCookie.prototype.auth=function(force){if(this.isConnected()&&this._validCookie()&&!force)return this._loadCookie();this._validCookie()&&!force&&this._loadCookie();var self=this;$.service("user").info(function(data){data?data.hasOwnProperty("error")?(self._setCookie(self.AUTH_COOKIE_NAME,!1),self.options.user_disconnected_callback()):self._setData(data):(self._setCookie(self.AUTH_COOKIE_NAME,!1),self.options.api_error_callback())})},UserCookie.prototype.isConnected=function(){return 1==this._getCookie(this.AUTH_COOKIE_NAME)?!0:void 0},UserCookie.prototype.logout=function(){this._setCookie(this.AUTH_COOKIE_NAME,!1),this.options.user_disconnected_callback()},UserCookie.prototype._setData=function(data){void 0!==data&&null!==data&&data?this._isNewData(this.data,data)&&(this.data=data):this.data=null},UserCookie.prototype._isNewData=function(oldData,newData){if(void 0===oldData||null===oldData||!oldData)return!0;for(var k in newData)if(!oldData.hasOwnProperty(k)||oldData[k]!=newData[k])return!0;return!1},UserCookie.prototype._validCookie=function(){return null===this._getCookie("lastName")?!1:null===this._getCookie("firstName")?!1:null===this._getCookie("userStatus")?!1:!0},UserCookie.prototype._loadCookie=function(){var data={lastName:this._getCookie("lastName"),firstName:this._getCookie("firstName"),userStatus:this._getCookie("userStatus")};this._setData(data)},UserCookie.prototype._createCookie=function(data){for(k in data)this._setCookie(k,data[k]);this._setCookie(this.AUTH_COOKIE_NAME,!0)},UserCookie.prototype._setCookie=function(name,value){var date=new Date;date.setTime(date.getTime()+this.options.lifetime);var expires="; expires="+date.toGMTString(),cookie=name+"="+value+expires+"; path="+this.options.path;void 0!==this.options.domain&&null!==this.options.domain&&""!=this.options.domain&&(cookie+="; domain="+this.options.domain),document.cookie=cookie},UserCookie.prototype._getCookie=function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null},UserCookie.prototype.trigram=function(){try{var $return=this._getCookie("firstName").charAt(0).toUpperCase()+this._getCookie("lastName").charAt(0).toUpperCase()}catch(err){return""}return $return},function(factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(window.WatchJS=factory(),window.watch=window.WatchJS.watch,window.unwatch=window.WatchJS.unwatch,window.callWatchers=window.WatchJS.callWatchers)}(function(){function clearTimerID(){timerID=null;for(var i=0;i<timeouts.length;i++)timeouts[i]();timeouts.length=0}var WatchJS={noMore:!1,useDirtyCheck:!1},lengthsubjects=[],dirtyChecklist=[],pendingChanges=[],supportDefineProperty=!1;try{supportDefineProperty=Object.defineProperty&&Object.defineProperty({},"x",{})}catch(ex){}var isFunction=function(functionToCheck){var getType={};return functionToCheck&&"[object Function]"==getType.toString.call(functionToCheck)},isArray=function(obj){return"[object Array]"===Object.prototype.toString.call(obj)},isObject=function(obj){return"[object Object]"==={}.toString.apply(obj)},getObjDiff=function(a,b){var aplus=[],bplus=[];if("string"!=typeof a&&"string"!=typeof b){if(isArray(a))for(var i=0;i<a.length;i++)void 0===b[i]&&aplus.push(i);else for(var i in a)a.hasOwnProperty(i)&&void 0===b[i]&&aplus.push(i);if(isArray(b))for(var j=0;j<b.length;j++)void 0===a[j]&&bplus.push(j);else for(var j in b)b.hasOwnProperty(j)&&void 0===a[j]&&bplus.push(j)}return{added:aplus,removed:bplus}},clone=function(obj){if(null==obj||"object"!=typeof obj)return obj;var copy=obj.constructor();for(var attr in obj)copy[attr]=obj[attr];return copy},defineGetAndSet=function(obj,propName,getter,setter){try{Object.observe(obj,function(changes){changes.forEach(function(change){change.name===propName&&setter(change.object[change.name])})})}catch(e){try{Object.defineProperty(obj,propName,{get:getter,set:function(value){setter.call(this,value,!0)},enumerable:!0,configurable:!0})}catch(e2){try{Object.prototype.__defineGetter__.call(obj,propName,getter),Object.prototype.__defineSetter__.call(obj,propName,function(value){setter.call(this,value,!0)})}catch(e3){observeDirtyChanges(obj,propName,setter)}}}},defineProp=function(obj,propName,value){try{Object.defineProperty(obj,propName,{enumerable:!1,configurable:!0,writable:!1,value:value})}catch(error){obj[propName]=value}},observeDirtyChanges=function(obj,propName,setter){dirtyChecklist[dirtyChecklist.length]={prop:propName,object:obj,orig:clone(obj[propName]),callback:setter}},watch=function(){isFunction(arguments[1])?watchAll.apply(this,arguments):isArray(arguments[1])?watchMany.apply(this,arguments):watchOne.apply(this,arguments)},watchAll=function(obj,watcher,level,addNRemove){if("string"!=typeof obj&&(obj instanceof Object||isArray(obj))){if(isArray(obj)){if(defineWatcher(obj,"__watchall__",watcher,level),void 0===level||level>0)for(var prop=0;prop<obj.length;prop++)watchAll(obj[prop],watcher,level,addNRemove)}else{var prop,props=[];for(prop in obj)"$val"==prop||!supportDefineProperty&&"watchers"===prop||Object.prototype.hasOwnProperty.call(obj,prop)&&props.push(prop);watchMany(obj,props,watcher,level,addNRemove)}addNRemove&&pushToLengthSubjects(obj,"$$watchlengthsubjectroot",watcher,level)}},watchMany=function(obj,props,watcher,level,addNRemove){if("string"!=typeof obj&&(obj instanceof Object||isArray(obj)))for(var i=0;i<props.length;i++){var prop=props[i];watchOne(obj,prop,watcher,level,addNRemove)}},watchOne=function(obj,prop,watcher,level,addNRemove){"string"!=typeof obj&&(obj instanceof Object||isArray(obj))&&(isFunction(obj[prop])||(null!=obj[prop]&&(void 0===level||level>0)&&watchAll(obj[prop],watcher,void 0!==level?level-1:level),defineWatcher(obj,prop,watcher,level),addNRemove&&(void 0===level||level>0)&&pushToLengthSubjects(obj,prop,watcher,level)))},unwatch=function(){isFunction(arguments[1])?unwatchAll.apply(this,arguments):isArray(arguments[1])?unwatchMany.apply(this,arguments):unwatchOne.apply(this,arguments)},unwatchAll=function(obj,watcher){if(!(obj instanceof String)&&(obj instanceof Object||isArray(obj)))if(isArray(obj)){for(var props=["__watchall__"],prop=0;prop<obj.length;prop++)props.push(prop);unwatchMany(obj,props,watcher)}else{var unwatchPropsInObject=function(obj2){var props=[];for(var prop2 in obj2)obj2.hasOwnProperty(prop2)&&(obj2[prop2]instanceof Object?unwatchPropsInObject(obj2[prop2]):props.push(prop2));unwatchMany(obj2,props,watcher)};unwatchPropsInObject(obj)}},unwatchMany=function(obj,props,watcher){for(var prop2 in props)props.hasOwnProperty(prop2)&&unwatchOne(obj,props[prop2],watcher)},timeouts=[],timerID=null,getTimerID=function(){return timerID||(timerID=setTimeout(clearTimerID)),timerID},registerTimeout=function(fn){null==timerID&&getTimerID(),timeouts[timeouts.length]=fn},trackChange=function(){var fn=isFunction(arguments[2])?trackProperty:trackObject;fn.apply(this,arguments)},trackObject=function(obj,callback,recursive,addNRemove){var level,change=null,lastTimerID=-1,isArr=isArray(obj),fn=function(prop,action,newValue,oldValue){var timerID=getTimerID();if(lastTimerID!==timerID&&(lastTimerID=timerID,change={type:"update"},change.value=obj,change.splices=null,registerTimeout(function(){callback.call(this,change),change=null})),isArr&&obj===this&&null!==change){if("pop"===action||"shift"===action)newValue=[],oldValue=[oldValue];else if("push"===action||"unshift"===action)newValue=[newValue],oldValue=[];else if("splice"!==action)return;change.splices||(change.splices=[]),change.splices[change.splices.length]={index:prop,deleteCount:oldValue?oldValue.length:0,addedCount:newValue?newValue.length:0,added:newValue,deleted:oldValue}}};level=1==recursive?void 0:0,watchAll(obj,fn,level,addNRemove)},trackProperty=function(obj,prop,callback,recursive,addNRemove){obj&&prop&&(watchOne(obj,prop,function(prop,action,newvalue,oldvalue){var change={type:"update"};change.value=newvalue,change.oldvalue=oldvalue,(recursive&&isObject(newvalue)||isArray(newvalue))&&trackObject(newvalue,callback,recursive,addNRemove),callback.call(this,change)},0),(recursive&&isObject(obj[prop])||isArray(obj[prop]))&&trackObject(obj[prop],callback,recursive,addNRemove))},defineWatcher=function(obj,prop,watcher,level){var newWatcher=!1,isArr=isArray(obj);obj.watchers||(defineProp(obj,"watchers",{}),isArr&&watchFunctions(obj,function(index,action,newValue,oldValue){if(addPendingChange(obj,index,action,newValue,oldValue),0!==level&&newValue&&(isObject(newValue)||isArray(newValue))){var i,n,ln,wAll,watchList=obj.watchers[prop];for((wAll=obj.watchers.__watchall__)&&(watchList=watchList?watchList.concat(wAll):wAll),ln=watchList?watchList.length:0,i=0;ln>i;i++)if("splice"!==action)watchAll(newValue,watchList[i],void 0===level?level:level-1);else for(n=0;n<newValue.length;n++)watchAll(newValue[n],watchList[i],void 0===level?level:level-1)}})),obj.watchers[prop]||(obj.watchers[prop]=[],isArr||(newWatcher=!0));for(var i=0;i<obj.watchers[prop].length;i++)if(obj.watchers[prop][i]===watcher)return;if(obj.watchers[prop].push(watcher),newWatcher){var val=obj[prop],getter=function(){return val},setter=function(newval,delayWatcher){var oldval=val;if(val=newval,0!==level&&obj[prop]&&(isObject(obj[prop])||isArray(obj[prop]))&&!obj[prop].watchers){var i,ln=obj.watchers[prop].length;for(i=0;ln>i;i++)watchAll(obj[prop],obj.watchers[prop][i],void 0===level?level:level-1)}return isSuspended(obj,prop)?void resume(obj,prop):void(WatchJS.noMore||oldval!==newval&&(delayWatcher?addPendingChange(obj,prop,"set",newval,oldval):callWatchers(obj,prop,"set",newval,oldval),WatchJS.noMore=!1))};WatchJS.useDirtyCheck?observeDirtyChanges(obj,prop,setter):defineGetAndSet(obj,prop,getter,setter)}},callWatchers=function(obj,prop,action,newval,oldval){if(void 0!==prop){var ln,wl,watchList=obj.watchers[prop];(wl=obj.watchers.__watchall__)&&(watchList=watchList?watchList.concat(wl):wl),ln=watchList?watchList.length:0;for(var wr=0;ln>wr;wr++)watchList[wr].call(obj,prop,action,newval,oldval)}else for(var prop in obj)obj.hasOwnProperty(prop)&&callWatchers(obj,prop,action,newval,oldval)},methodNames=["pop","push","reverse","shift","sort","slice","unshift","splice"],defineArrayMethodWatcher=function(obj,original,methodName,callback){defineProp(obj,methodName,function(){var i,newValue,oldValue,response,index=0;if("splice"===methodName){var start=arguments[0],end=start+arguments[1];for(oldValue=obj.slice(start,end),newValue=[],i=2;i<arguments.length;i++)newValue[i-2]=arguments[i];index=start}else newValue=arguments.length>0?arguments[0]:void 0;return response=original.apply(obj,arguments),"slice"!==methodName&&("pop"===methodName?(oldValue=response,index=obj.length):"push"===methodName?index=obj.length-1:"shift"===methodName?oldValue=response:"unshift"!==methodName&&void 0===newValue&&(newValue=response),callback.call(obj,index,methodName,newValue,oldValue)),response})},watchFunctions=function(obj,callback){if(isFunction(callback)&&obj&&!(obj instanceof String)&&isArray(obj))for(var methodName,i=methodNames.length;i--;)methodName=methodNames[i],defineArrayMethodWatcher(obj,obj[methodName],methodName,callback)},unwatchOne=function(obj,prop,watcher){if(obj.watchers[prop])if(void 0===watcher)delete obj.watchers[prop];else for(var i=0;i<obj.watchers[prop].length;i++){var w=obj.watchers[prop][i];w==watcher&&obj.watchers[prop].splice(i,1)}removeFromLengthSubjects(obj,prop,watcher),removeFromDirtyChecklist(obj,prop)},suspend=function(obj,prop){if(obj.watchers){var name="__wjs_suspend__"+(void 0!==prop?prop:"");obj.watchers[name]=!0}},isSuspended=function(obj,prop){return obj.watchers&&(obj.watchers.__wjs_suspend__||obj.watchers["__wjs_suspend__"+prop])},resume=function(obj,prop){registerTimeout(function(){delete obj.watchers.__wjs_suspend__,delete obj.watchers["__wjs_suspend__"+prop]})},pendingTimerID=null,addPendingChange=function(obj,prop,mode,newval,oldval){pendingChanges[pendingChanges.length]={obj:obj,prop:prop,mode:mode,newval:newval,oldval:oldval},null===pendingTimerID&&(pendingTimerID=setTimeout(applyPendingChanges))},applyPendingChanges=function(){var change=null;pendingTimerID=null;for(var i=0;i<pendingChanges.length;i++)change=pendingChanges[i],callWatchers(change.obj,change.prop,change.mode,change.newval,change.oldval);change&&(pendingChanges=[],change=null)},loop=function(){for(var i=0;i<lengthsubjects.length;i++){var subj=lengthsubjects[i];if("$$watchlengthsubjectroot"===subj.prop){var difference=getObjDiff(subj.obj,subj.actual);(difference.added.length||difference.removed.length)&&(difference.added.length&&watchMany(subj.obj,difference.added,subj.watcher,subj.level-1,!0),subj.watcher.call(subj.obj,"root","differentattr",difference,subj.actual)),subj.actual=clone(subj.obj)}else{var difference=getObjDiff(subj.obj[subj.prop],subj.actual);if(difference.added.length||difference.removed.length){if(difference.added.length)for(var j=0;j<subj.obj.watchers[subj.prop].length;j++)watchMany(subj.obj[subj.prop],difference.added,subj.obj.watchers[subj.prop][j],subj.level-1,!0);callWatchers(subj.obj,subj.prop,"differentattr",difference,subj.actual)}subj.actual=clone(subj.obj[subj.prop])}}var n,value;if(dirtyChecklist.length>0)for(var i=0;i<dirtyChecklist.length;i++)n=dirtyChecklist[i],value=n.object[n.prop],compareValues(n.orig,value)||(n.orig=clone(value),n.callback(value))},compareValues=function(a,b){var i,state=!0;if(a!==b)if(isObject(a)){for(i in a)if((supportDefineProperty||"watchers"!==i)&&a[i]!==b[i]){state=!1;break}}else state=!1;return state},pushToLengthSubjects=function(obj,prop,watcher,level){var actual;actual=clone("$$watchlengthsubjectroot"===prop?obj:obj[prop]),lengthsubjects.push({obj:obj,prop:prop,actual:actual,watcher:watcher,level:level})},removeFromLengthSubjects=function(obj,prop,watcher){for(var i=0;i<lengthsubjects.length;i++){var subj=lengthsubjects[i];subj.obj==obj&&subj.prop==prop&&subj.watcher==watcher&&lengthsubjects.splice(i,1)}},removeFromDirtyChecklist=function(obj,prop){for(var notInUse,i=0;i<dirtyChecklist.length;i++){var n=dirtyChecklist[i],watchers=n.object.watchers;notInUse=n.object==obj&&n.prop==prop&&watchers&&(!watchers[prop]||0==watchers[prop].length),notInUse&&dirtyChecklist.splice(i,1)}};return setInterval(loop,50),WatchJS.watch=watch,WatchJS.unwatch=unwatch,WatchJS.callWatchers=callWatchers,WatchJS.suspend=suspend,WatchJS.onChange=trackChange,WatchJS});var CacheService=function(options){this.options=$.extend({},this.DEFAULTS,options)};CacheService.prototype.VERSION="0.0.1",CacheService.prototype.DEFAULTS={},CacheService.prototype.instance=null,CacheService.prototype.getInstance=function(options){return(void 0===CacheService.prototype.instance||null===CacheService.prototype.instance)&&(CacheService.prototype.instance=new CacheService(options)),CacheService.prototype.instance},CacheService.prototype.set=function(name,value){"object"==typeof value?eval("localStorage.".concat(name)+" = JSON.stringify(value);"):eval("localStorage.".concat(name)+" = value;")},CacheService.prototype.get=function(path){var value=CacheService.prototype.byString(localStorage,path);try{value=JSON.parse(value)}catch(e){}return value},CacheService.prototype.byString=function(o,s){s=s.replace(/\[(\w+)\]/g,".$1"),s=s.replace(/^\./,"");for(var a=s.split("."),i=0,n=a.length;n>i;++i){var k=a[i];if(!(k in o))return;o=o[k]}return o};var UrlService=function(options){this.options=$.extend({},this.DEFAULTS,options)};UrlService.prototype.VERSION="0.0.1",UrlService.prototype.DEFAULTS={},UrlService.prototype.instance=null,UrlService.prototype.getInstance=function(options){return(void 0===UrlService.prototype.instance||null===UrlService.prototype.instance)&&(UrlService.prototype.instance=new UrlService(options)),UrlService.prototype.instance},UrlService.prototype.topbar=function(callback){var data=$.service("cache").get("threeds_header_topbar_url");void 0===data||null===data||data===!1||Setting3DS.prototype.getInstance().get("debug")===!0?($.ajaxSetup({crossDomain:!0,xhrFields:{withCredentials:!0}}),$.ajax({type:"GET",crossDomain:!0,dataType:"json",url:this.getTopbarInfoApiURL(),success:function(data){$.service("cache").set("threeds_header_topbar_url",data),callback(data)},error:function(resultat,statut,erreur){$(document).trigger("UrlServiceErrorEvent",[UrlService.prototype.instance,"topbar",callback]),callback(!1)}})):callback(data)},UrlService.prototype.getTopbarInfoApiURL=function(){return Setting3DS.prototype.getInstance().get("atg.apiURL").indexOf("localhost")>-1?Setting3DS.prototype.getInstance().get("atg.apiURL")+"/api/get-topbar-urls/success.json":Setting3DS.prototype.getInstance().get("atg.apiURL")+"/data/jsp/links/getTopbarURLs.jsp"};var UserService=function(options){this.options=$.extend({},this.DEFAULTS,options)};UserService.prototype.VERSION="0.0.1",UserService.prototype.DEFAULTS={},UserService.prototype.instance=null,UserService.prototype.getInstance=function(options){return(void 0===UserService.prototype.instance||null===UserService.prototype.instance)&&(UserService.prototype.instance=new UserService(options)),UserService.prototype.instance},UserService.prototype.info=function(callback){$.ajaxSetup({crossDomain:!0,xhrFields:{withCredentials:!0}}),$.ajax({type:"GET",crossDomain:!0,dataType:"json",url:this.getUserInfoApiURL(),success:function(data){callback(data)},error:function(resultat,statut,erreur){callback(!1)}})},UserService.prototype.getUserInfoApiURL=function(){return Setting3DS.prototype.getInstance().get("atg.apiURL").indexOf("localhost")>-1?Setting3DS.prototype.getInstance().get("atg.apiURL")+"/api/get-user-info/success.json":Setting3DS.prototype.getInstance().get("atg.apiURL")+"/data/jsp/users/getUserInfo.jsp"};
//# sourceMappingURL=threeds.min.js.map
